# EntityTypeExpression
Assembly and parse Entity type expression string

C# класс для записи типа Сущности содержит функции для разбора и сборки текста записи, построения дерева классов Сущностей.

(С) Селяков Павел 2021  


## Для чего нужна эта запись?
* Это текстовое описание структуры классов Сущностей. Оно используется для указания класса Сущности. 
  Например, для указания класса радиодетали, чтобы из таблицы базы данных выбирать детали требуемого класса.
  При этом общее дерево классов строится из строк описания классов отдельных деталей.
  * Пример указания классов деталей:
	* Радиодеталь::Транзистор::ТранзисторБиполярный
	* Транзистор::ТранзисторПолевой
	* ТранзисторБиполярный::ТранзисторPNP
	* ТранзисторPNP
	* Транзистор::IGBT 
  * Собранное дерево классов:
  	* Радиодеталь
  		* Транзистор
			* ТранзисторБиполярный
	  			* ТранзисторPNP
			* ТранзисторПолевой
			* IGBT 
  * Теперь из базы данных можно выбрать детали заданного класса, например, все (любые) транзисторы, или только биполярные транзисторы структуры p-n-p. 
  * Текстовая запись позволяет пользователю проще ориентироваться в классификации деталей. 

## Формат Записи Класса
Формат записи класса для выражения отношений абстракции и агрегации.

### Общие сведения
* Класс - это обозначение здесь названия типа Сущности.
	* Класс - простой тип. Имя класса может состоять из нескольких слов, содержать пробелы.
	* Имя класса состоит из букв, пробелов, знаков -+_= и цифр. Не должно содержать ,:;<> как символов формата разметки. 
	* Имя класса должно быть уникальным в пределах области действия.
	* Имя класса должно быть регистронезависимым: Пример = приМер.	  
	* Классы в записи разделяются точкой с запятой. После последнего элемента точка с запятой не обязательна.
	* Предполагается, что одна строка записи описывает классы для одной Сущности.
* Надкласс - это обозначение здесь класса, стоящего выше рассматриваемого класса в иерархии Абстракции либо Агрегации.
* Подкласс - это обозначение здесь класса, стоящего ниже рассматриваемого класса в иерархии Абстракции либо Агрегации.
* Контейнер - класс, включающий в себя другие классы (отношение Агрегации)

### Отношение абстракции
* Класс::Класс - это отношение абстракции. Первый член выражения это надкласс, второй - подкласс в отношении абстракции. Надкласс в выражении может не указываться.
* Выражение :: может отделяться пробелами с одной или обеих сторон.

### Отношение агрегации
* Класс<Класс> - тип-контейнер для сущностей другого типа.
* Класс<Класс, Класс, Класс> - тип-контейнер для трех сущностей указанных типов. 
	* Пример: Dictionary<String,Int32>.
* Группа агрегации - классы, перечисленные внутри угловых скобок < группа агрегации >
* Символы группы агрегации < и > могут отделяться пробелами с одной или двух сторон.
* Вложенные агрегации не допускаются. Это упрощает и парсер, и восприятие выражения человеком.
* Внутри группы агрегации можно использовать одни лишь названия типов-контейнеров, а содержимое типа-контейнера описывать в другой строке.  
* Элементы группы агрегации разделяются запятыми. До и после запятых могут быть пробелы.
* В записи классов Сущности только последний класс каждой цепочки абстракции классов может иметь группу агрегации.
* Пока не определено, как наследуются члены группы агрегации в производных классах.
* Пример: Класс:: Класс;Класс ::Класс < Класс::Класс,Класс , Класс :: Класс >

### Несколько классов одной сущности
* Элементы разделяются точкой с запятой. После последнего элемента точка с запятой не обязательна.
* Пример: Класс; Класс<Класс, Класс>;Класс

### Комбинация абстракции и агрегации
* Пример: Класс::Класс; Класс::Класс<Класс::Класс, Класс, Класс::Класс>;

### Сложный пример выражения
Это выражение описывает тип некоторой Сущности как соответствующей нескольким классам, с отношениями абстракции и агрегации. 
Для восприятия будет удобнее, если сложные части выражения поместить в конце, а простые в начале.
* Пример: Класс;Класс::Класс;Класс::Класс<Класс::Класс, Класс, Класс::Класс>;

 
